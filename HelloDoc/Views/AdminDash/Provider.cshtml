@model DAL.ViewModel.Provider
@{
    ViewData["Title"] = "Provider";
    Layout = "~/Views/Shared/_AdminDash.cshtml";
}



@* --------------------- *@
<div class="container-fluid  bg-body-secondary ">
    <div class="container">
    <div class="justify-content-between d-flex  container-fluid mb-2 position-relative ">
        <div class="mt-3">
            <h3> Provider Information </h3>
        </div>
        <div>
            <a asp-action="AdminDashboard" class="btn btn-outline-info mt-3"> ❮  Back </a>
        </div>
    </div>
    <div class="card border-0 shadow p-4 mb-5 rounded">
        <div class="row justify-content-between ps-3">

            <div class="d-flex  border border-secondary  rounded align-items-center mx-sm-2 ps-2 my-2 col-3">
                <select class="form-control border-0 shadow-none " id="regiondropdown">
                    <option value=" ">All Region</option>
                    @foreach (var state in Model.regions)
                    {
                        <option value="@state.RegionId">@state.Name</option>
                    }
                </select>
                
            </div>
            <div class="d-flex col-3 mr-0 py-2 justify-content-end">
                <a class="btn btn-outline-info mx-2" style="width:fit-content">
                    <span>Create Provider Account</span>
                </a>
            </div>

        </div>

        <div class="my-3 table-responsive" id="ProviderPartial">
        </div>

    </div>
</div>
</div>
<script src="~/js/AdminProvider.js"></script>
@* --------------------- *@


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
     $(document).ready(function () { 

         console.log("sabnjsabx")
     GetProviders();                          
 })
    $("#regiondropdown").on("change", function () {
        console.log("1234")
        GetProviders();
 });

    function GetProviders() {
     var region = $("#regiondropdown").val();
     console.log(region)
     $.ajax({
         method: "GET",
         url: "/AdminDash/ProvidersData",
         data: { region: region },
         success: function (response) {
             if (response.code == 401) {

                 location.reload();
             }
             else {
                 console.log("SuccessFully Executed")
                    $('#ProviderPartial').html(response)
                
             }

         },
         error: function () {
             console.log("Error")
         }
     })
 }
</script>