@{
    Layout = "~/Views/Shared/_AdminDash.cshtml";
}


<div class="bg-body-secondary">
    <div class="container d-flex justify-content-between text-center align-items-center my-3 bg-body-secondary">
        <h3 class="text-body fw-semibold">Timesheet</h3>
        <a asp-action="ProviderDashBoard" class="btn btn-outline-info"> ❮  Back </a>
    </div>


    <div class="container w-75  white-bag shadow pt-3 pb-3 ">
        <div class="d-flex w-50">
            <select class="form-select mx-2 py-3" id="PhysicianId" onchange="ChangeDate()" aria-label="Default select example">
                <option value="0">Search By Physician</option>
                @foreach (var item in ViewBag.Physicians)
                {
                    <option value="@item.PhysicianId">@item.FirstName</option>
                }
            </select>
            <select class="form-select py-3" aria-label="Default select example" id="selectedDate" onchange="Load()">
                <option value="0">Search By Timesheetperiod</option>
                @{
                    int month = 1;
                    int year = DateTime.Now.Year;
                   
                }
                @for (month = 1; month <= 12; month++)
                {

                    @if(month < DateTime.Now.Month )
                    {
                        string startdate1 = new DateTime(year, month, 1).Date.ToString("yyyy/MM/dd");
                        string enddate1 = new DateTime(year, month, 15).Date.ToString("yyyy/MM/dd");

                        <option value="@startdate1">@startdate1 - @enddate1</option>

                        string startdate2 = new DateTime(year, month, 16).Date.ToString("yyyy/MM/dd");
                        string enddate2 = new DateTime(year, month, 1).AddMonths(1).AddDays(-1).Date.ToString("yyyy/MM/dd");
                        <option value="@startdate2">@startdate2 - @enddate2</option>
                    }
                   
                
                } 
            </select>
        </div>
    </div>

    
    <div class="container px-0  w-75" id="timssheetdata">

    </div> 
    <div class="container  px-0 w-75" id="ApprovalSheet">

    </div>
</div>

<script>

    function ChangeDate() { 
        const select = document.getElementById("selectedDate");
        select.selectedIndex = 0;

    }
    function Load() { 
        
        var PhysicianId = $("#PhysicianId").val();
        var date = $("#selectedDate").val();

        if (PhysicianId != "0") {

            if (date != "0") {
             
                $.ajax({

                    type :'GET',
                    url: '/AdminDash/GetReimbursementData',
                    data: { PhysicianId: PhysicianId, date: date },
                    success: function (response) {

                        $("#timssheetdata").html(response);

                    }

                });
            }
            else {
                alert("Please Select the date");
            }
        }
        else { 
            alert("Please Select the physician");
            const select = document.getElementById("selectedDate");
            select.selectedIndex = 0;

        }
    }

  

    
</script>
