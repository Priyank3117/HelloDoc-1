@model List<DAL.ViewModel.Admin_DashBoard>

@{
    ViewData["Title"] = "Admin_Dash";
    Layout = "~/Views/Shared/_Admin_Dash.cshtml";
}
<style>
    .triangle {
        width: 0;
        height: 0;
        border-left: 20px solid;
        border-right: 20px solid ;
        border-top: 20px solid black;
        position: absolute;
        bottom:-20px;
        left: 50%;
        transform: translateX(-50%)
    }
</style>


   

        @* -------------------------------gutters--------------------------------------------- *@
 <div class="row gx-4 gy-4 mt-4 ms-3 me-3 " style="margin-top:3rem">
            <div class="col-4 col-xl-2 col-md-4 ">
            <div class="px-3 py-2  border  rounded-4 position-relative" id="divnew" style="background-color:#e9eaef">
                <a id="New">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-2" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
                        </svg>
                        <h4>new</h4>
                    </div>
                    <div class="triangle" id="tranew"></div>
                    <h3>@ViewBag.NewCount</h3>
                </a>
                </div>
            </div> 
            <div class="col-4 col-xl-2 col-md-4 ">
            <div class="px-3 py-2 border rounded-4 position-relative" style="background-color:#e5f2f8;color:#0dcaf0;" id="divpen">
                  <a id="Pending">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-fill me-2" viewBox="0 0 16 16">
                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />
                        </svg>
                        <h4>pending</h4>
                    </div>
                    <div class="triangle  text-white" id="trapending"></div>
                    <h3>@ViewBag.PendingCount</h3>
                  </a>
                </div>
            </div> 
            <div class="col-4 col-xl-2 col-md-4 ">
            <div class="px-3 py-2 border  rounded-4 position-relative" style="background-color:#e9f0e8"  id="divact">
                <a id="Active">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-2" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
                        </svg>
                        <h4>Active</h4>
                    </div>
                    <div class="triangle text-white" id="traact"></div>
                    <h3>@ViewBag.activecount</h3>
                </a>
                </div>
            </div> 
            <div class="col-4 col-xl-2 col-md-4 ">
            <div class="px-3 py-2 border  rounded-4 text-pink position-relative" style="background-color:#f7e6ee" id="divcon">
                   <a id="Conclude">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-2" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
                        </svg>
                        <h4>conclude</h4>
                    </div>
                    <div class="triangle text-white" id="tracon"></div>
                    <h3>@ViewBag.conclude</h3>
                   </a>
                </div>
            </div>  
            <div class="col-4 col-xl-2 col-md-4 ">
            <div class="px-3 py-2 border  rounded-4 position-relative" style="background-color:#e5eef5" id="divclo">
                <a id="ToClose">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-2" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
                        </svg>
                        <h4>To close</h4>
                    </div>
                    <div class="triangle text-white" id="traclo"></div>
                    <h3>@ViewBag.toclosed</h3>
                </a>
                </div>
            </div>  
            <div class="col-4 col-xl-2 col-md-4 ">
            <div class="px-3 py-2 border  rounded-4 position-relative" style="background-color:#efeef4" id="divun">
                <a id="UnPaid">
                    <div class="d-flex align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-2" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
                        </svg>
                        <h4>Unpaid</h4>
                    </div>
                    <div class="triangle text-white" id="traun"></div>
                    <h3>@ViewBag.unpaid</h3>
                </a>
                </div>
            </div>
        </div>
        @* -------------------------------gutters--------------------------------------------- *@
        @* -------------------------------buttons--------------------------------------------- *@
    <div class="mt-3 mt-md-5 d-sm-flex justify-content-between align-items-center">
    <div class="ms-4">
        <p class="fs-2 ps-2">Patients<span class="text-primary" id="textspan">(new)</span></p>
    </div>
    <div class="me-4" >
        <button type="button" class="btn btn-info text-white me-2">
            <i class="bi bi-send  me-md-2 "></i><span class="d-none d-xl-inline">Send Link</span>
        </button>
            <button type="button" class="btn btn-info  text-white me-2">
            <i class="bi bi-pencil-square me-md-2"></i><span class="d-none d-xl-inline">
                Create
                Requests
            </span>
        </button>
            <button type="button" class="btn btn-info  text-white me-2">
            <i class="bi bi-arrow-up-right "></i>
            <span class="d-none d-xl-inline ">Export</span>
        </button>
            <button type="button" class="btn btn-info  text-white me-2">
            <i class="bi bi-box-arrow-up-right "></i><span class="d-none d-xl-inline">
                Export
                All
            </span>
        </button>
            <button type="button" class="btn btn-info  text-white me-2">
            <i class="bi bi-person-plus  me-md-2"></i><span class="d-none d-xl-inline">
                Request DTY
                Support
            </span>
        </button>
    </div>
</div>

        @* -------------------------------buttons--------------------------------------------- *@
      </div>

        @* -------------------------------Search--------------------------------------------- *@
       <div class="container-fluid">
    <div class="row d-flex border rounded" style="">
        <div class="d-flex col-xl-6">
            <div class="input-group bg-white mt-2 mb-2 d-flex align-items-center ms-2 " style="width:17rem">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 50 50">
                    <path d="M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z">
                    </path>
                </svg>
                <input type="text" class="form-control ms-2 " id="Search" placeholder="Search patient">
            </div>
            <div class="d-flex  rounded align-items-center ms-2 ps-2" style="width:17rem" id="Region">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 50 50">
                    <path d="M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z">
                    </path>
                </svg>
                <select class="form-select border-0 form-select" aria-label="Default select example" >
                    <option selected >All Regions</option>
                    <option  data-value="1">One</option>
                    <option data-value="2">Two</option>
                    <option  data-value="3">Three</option>
                </select>
            </div>
        </div>
        <div class="d-flex  col-xl-6  col-sm-12 justify-content-end   ">
            <button class="active-filter filter-options d-flex align-items-center  px-3 py-1 rounded btn filter-btn" data-value="">
                <span>All</span>
            </button>

            <button class="filter-options px-2 py-1 rounded d-flex align-items-center ms-2 btn filter-btn" data-value="1">
                <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle fill="#5fbc61" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                </svg>
                <span class="ms-2">Patient</span>
            </button>

            <button class="filter-options px-2 py-1 rounded d-flex align-items-center ms-2 btn filter-btn" data-value="2">
                <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle fill="#ed9124" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                </svg>
                <span class="ms-2">Family/Friend</span>
            </button>
            <button class="filter-options px-2 py-1 rounded d-flex align-items-center ms-2 btn filter-btn" data-value="4">
                <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle fill="#e26277" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                </svg>
                <span class="ms-2">Business</span>
            </button>
            <button class="filter-options px-2 py-1 rounded d-flex align-items-center ms-2 btn filter-btn" data-value="3" >
                <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle fill="#007fc6" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                </svg>
                <span class="ms-2">Concierge</span>
            </button>
            <button class="filter-options px-2 py-1 rounded d-flex align-items-center ms-2 btn">
                <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle fill="#9966cd" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                </svg>
                <span class="ms-2">VIP</span>
            </button>
        </div>

    </div>
      


       
        @* -------------------------------Search--------------------------------------------- *@

 <div id="PartialViews">
    <partial name="Admin_TableNew" model="@Model"></partial>
    <partial name="Admin_TablePending" model="@Model"></partial>
    <partial name="Admin_TableActive" model="@Model"></partial>
    <partial name="Admin_TableConclude" model="@Model"></partial>
    <partial name="Admin_TableToClose" model="@Model"></partial>
    <partial name="Admin_TableUnPaid" model="@Model"></partial>

 </div>


@section scripts {
    <!-- jQuery script -->
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/jquery/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>

        $(document).ready(function () {

            var currentPartialview = "Admin_TableNew"

            var currentstatus = [1];
      
               $('.triangle').css('display', 'none');
                $('#tranew').css('display', 'block').css('border-top', '20px solid #203f9a').css('color','white');
           

                filtertable(currentPartialview,currentstatus);
            $('Admin_TablePending').hide();
            $('Admin_TableActive').hide();
            $('Admin_TableConclude').hide(); 
            $('Admin_TableToClose').hide();
            $('Admin_TableUnPaid').hide();


           

          
            // ---------------hover----------------------       
            $("#divnew").hover(function () {
                $(this).css("background-color", "#203f9a").css("color", "white");
            }, function () {
                $(this).css("background-color", "#e9eaef").css("color", "black");
            }); 
            
            $("#divpen").hover(function () {
                $(this).css("background-color", "#0dcaf0").css("color", "white");
            }, function () {
                $(this).css("background-color", "#e5f2f8").css("color", "#0dcaf0");
            });   
            $("#divact").hover(function () {
                $(this).css("background-color", "#228c20").css("color", "white");
            }, function () {
                $(this).css("background-color", "#e9f0e8").css("color", "black");
            });
            $("#divcon").hover(function () {
                $(this).css("background-color", "#da0f82").css("color", "white");
            }, function () {
                $(this).css("background-color", "#f7e6ee").css("color", "black");
            });
            $("#divclo").hover(function () {
                $(this).css("background-color", "#0370d7").css("color", "white");
            }, function () {
                $(this).css("background-color", "#e5eef5").css("color", "black");
            }); 
            $("#divun").hover(function () {
                $(this).css("background-color", "#9966cd").css("color", "white");
            }, function () {
                $(this).css("background-color", "#efeef4").css("color", "#0dcaf0");
            });


              // -------------hover  end---------------------

        //-------------------on click functionality------------------------------

            $("#New").click(function () {
                currentstatus = [1];
                currentPartialview = "Admin_TableNew"
                    filtertable(currentPartialview, currentstatus);
                $('#textspan').text('(new)');
                $('.triangle').css('display', 'none');
                $('#tranew').css('display', 'block').css('border-top', '20px solid #203f9a').css('color', 'white');
            });


            $("#Pending").click(function () {
                 currentPartialview = "Admin_TablePending"
                 currentstatus=[2]
                    filtertable(currentPartialview, currentstatus);

                $('#textspan').text('(pending)');
                $('.triangle').css('display', 'none');
                $('#trapending').css('display', 'block').css('border-top', '20px solid  #0dcaf0');
            });

            $("#Active").click(function () {
                currentPartialview = "Admin_TableActive"
                currentstatus=[4,5]
                    filtertable(currentPartialview, currentstatus);
                $('#textspan').text('(Active)');
                $('.triangle').css('display', 'none');
                $('#traact').css('display', 'block').css('border-top', '20px solid #228c20').css('color', 'white');
            });


            $("#Conclude").click(function () {
                currentPartialview = "Admin_TableConclude"
                currentstatus = [6]
                    filtertable(currentPartialview, currentstatus);
                $('#textspan').text('(Conclude)');
                $('.triangle').css('display', 'none');
                $('#tracon').css('display', 'block').css('border-top', '20px solid #da0f82').css('color', 'white');
            });

            $("#ToClose").click(function () {
                currentPartialview = "Admin_TableToClose"
                currentstatus=[3,7,8]
                    filtertable(currentPartialview, currentstatus);
                $('#textspan').text('(To Close)');
                $('.triangle').css('display', 'none');
                $('#traclo').css('display', 'block').css('border-top', '20px solid #0370d7').css('color', 'white');
            });

            $("#UnPaid").click(function () {
                currentPartialview = "Admin_TableUnPaid"
                currentstatus = [9];
                    filtertable(currentPartialview, currentstatus);
                $('#textspan').text('(Unpaid)');
                $('.triangle').css('display', 'none');
                $('#traun').css('display', 'block').css('border-top', '20px solid #9966cd').css('color', 'white');
            });

        //-------------------on click functionality end------------------------------

            $('.form-select').on("change", function () {
                    filtertable(currentPartialview, currentstatus)
            });




             // -------------filter btn-----------------------------
            $('.filter-btn').click(function () {
                $('.filter-btn').removeClass('active')
                $(this).addClass('active')
                    filtertable(currentPartialview, currentstatus)

            });
             // -------------filter btn end -----------------------------

            // -------on search value--------------------          
            $("#Search").on("input", function () {
                    filtertable(currentPartialview, currentstatus);
            });
            // -------on search value end---------------------


            // --------------LoadPartialView---------------
                
            // --------------LoadPartialView end---------------

                function filtertable(partialName, currentstatus) {

                var SearchValue = $("#Search").val();
                var Filterselect = $('.filter-btn.active').data('value');
            

                var selectopt = $(".form-select").find(':selected');
                var selectvalue = selectopt.data('value');

                var region = $("#Region").val();


                if (SearchValue == "" && Filterselect == "" ) {
                        filtertable(currentPartialview, currentstatus);
                }

                else {
                    $.ajax({
                        type:"GET",
                        url: '@Url.Action("SearchPatient", "Admin_Dash")',
                        traditional:true,
                        data: { SearchValue: SearchValue, Filterselect: Filterselect, selectvalue: selectvalue
                                , partialName: partialName, currentstatus: currentstatus
                        },
                        success: function (data) 
                        {
                            $('#PartialViews').html(data);
                            console.log(data)
                        },

                        error: function (error) {
                            console.error(" " , error);
                        }
                    });
                }
            }

            

          
        });

    </script>
}